# MigrantBkk
Migrant population for Bangkok
ประชากรผู้อยู่อาศัยอยู่จริงในเมืองต่างๆทั่วโลก 
Meta (Facebook) ได้ใช้ภาพถ่ายดาวเทียมรายละเอียดสูง (VHRS@GSD 30cm) ประกอบกับข้อมูลแสงไฟจากดาวเทียม DMSP และข้อมูลประกอบอื่นๆ ที่อาจบ่งชี้ถึงการอยู่อาศัยของมนุษย์บนพื้นผิวโลก รวมทั้งข้อมูลประชากาศาสตร์ของแต่ละประเทศ การประมวลที่ได้คือ แผนที่ความหนาแน่นของประชากรความละเอียดสูง [High-density Population Map](https://dataforgood.facebook.com/dfg/tools/high-resolution-population-density-maps)<br/>
   เมื่อนำข้อมูลเขตการปกครองของกรุงเทพมหานครมา overlay จะได้จำนวนประชากรที่อยู่อาศัยปรากฏ  สำนักทะเบียนราษฏร์ กรมการปกครอง ร่วมกับ สำนักสถิตแห่งชาติ เผยแพร่จำนวนประชากรลงทะเบียนอาศัยในระดับ จังหวัด อำเภอ ตำบล (registered population)  ผลต่างของจำนวนประชากรจากทั้งสองแหล่งคือ ประชากรแฝง (migrant population)
<br/>
![จำนวนประชากรแฝงรายเขตของกรุงเทพมหานคร](CACHE/MigrantBKK_diff.png?raw=true "Title")
<br/>
![สัดส่วน % ประชากรแฝงรายเขตของกรุงเทพมหานคร](CACHE/MigrantBKK_diff_perc.png?raw=true "Title")
<br/>
| ลำดับ | รหัส  |        เขต           |  ปชก.รวม | ปชก.ทะเบียน |   ประชากรแฝง    | ตร.กม.| เวลา |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | 
| 00 | 1025   | Bang Phlat           |  222,080 |  100,319 |  121,761 (121.4%) |  11.8 | 3s. |
| 01 | 1017   | Huai Khwang          |  207,704 |   77,720 |  129,984 (167.2%) |  16.3 | 3s. |
| 02 | 1045   | Wang Thong Lang      |  270,303 |  115,083 |  155,220 (134.9%) |  17.1 | 3s. |
| 03 | 1048   | Thawi Watthana       |  134,557 |   75,460 |   59,097 (78.3 %) |  51.7 | 3s. |
| 04 | 1011   | Lat Krabang          |  339,692 |  160,850 |  178,842 (111.2%) | 128.6 | 7s. |
| 05 | 1026   | Din Daeng            |  190,451 |  131,847 |   58,604 (44.4 %) |   8.5 | 2s. |
| 06 | 1019   | Taling Chan          |  210,549 |  106,786 |  103,763 (97.2 %) |  35.8 | 3s. |
| 07 | 1002   | Dusit                |  132,442 |  108,815 |   23,627 (21.7 %) |  11.3 | 2s. |
| 08 | 1044   | Saphan Sung          |  147,052 |   88,918 |   58,134 (65.4 %) |  28.1 | 4s. |
| 09 | 1014   | Phaya Thai           |  160,455 |   73,533 |   86,922 (118.2%) |   9.2 | 2s. |
| 10 | 1020   | Bangkok Noi          |  193,873 |  120,032 |   73,841 (61.5 %) |  12.3 | 2s. |
| 11 | 1037   | Ratchathewi          |  127,357 |   72,900 |   54,457 (74.7 %) |   7.2 | 2s. |
| 12 | 1001   | Phra Nakhon          |   80,683 |   58,771 |   21,912 (37.3 %) |   5.4 | 2s. |
| 13 | 1008   | Pom Prap Sattru Phai |   49,634 |   52,093 |   -2,459 (-4.7 %) |   2.5 | 2s. |
| 14 | 1007   | Parthum Wan          |  107,378 |   54,996 |   52,382 (95.2 %) |   8.0 | 2s. |
| 15 | 1040   | Bang Khae            |  355,094 |  192,276 |  162,818 (84.7 %) |  47.9 | 4s. |
| 16 | 1034   | Suanluang            |  286,211 |  115,419 |  170,792 (148.0%) |  24.1 | 3s. |
| 17 | 1039   | Vadhana              |  213,347 |   80,847 |  132,500 (163.9%) |  13.0 | 3s. |
| 18 | 1016   | Bangkok Yai          |  110,782 |   73,864 |   36,918 (50.0 %) |   6.3 | 2s. |
| 19 | 1022   | Phasi Charoen        |  231,365 |  130,493 |  100,872 (77.3 %) |  19.2 | 3s. |
| 20 | 1013   | Samphanthawong       |   19,114 |   28,001 |   -8,887 (-31.7%) |   1.4 | 2s. |
| 21 | 1033   | Khlong Toei          |  194,639 |  110,481 |   84,158 (76.2 %) |  13.2 | 3s. |
| 22 | 1015   | Thon buri            |  180,040 |  121,539 |   58,501 (48.1 %) |   8.5 | 2s. |
| 23 | 1018   | Khlong San           |  114,576 |   77,471 |   37,105 (47.9 %) |   6.0 | 2s. |
| 24 | 1032   | Pra Wet              |  254,058 |  158,457 |   95,601 (60.3 %) |  53.7 | 4s. |
| 25 | 1004   | Bang Rak             |   70,670 |   46,087 |   24,583 (53.3 %) |   4.0 | 2s. |
| 26 | 1023   | Nong Khaem           |  239,089 |  148,298 |   90,791 (61.2 %) |  36.2 | 3s. |
| 27 | 1028   | Sathon               |  165,300 |   86,214 |   79,086 (91.7 %) |   7.3 | 2s. |
| 28 | 1012   | Yan na wa            |  193,278 |   82,481 |  110,797 (134.3%) |  12.5 | 2s. |
| 29 | 1035   | Chom Thong           |  230,222 |  158,646 |   71,576 (45.1 %) |  23.2 | 3s. |
| 30 | 1031   | Bang Kho laen        |  143,975 |   96,422 |   47,553 (49.3 %) |   8.3 | 2s. |

<br/>
   เนื่องจาก แผนที่ความหนาแน่นของประชากรความละเอียดสูง จาก Meta/Facebook มีความละเอียดมากหลายร้อยล้านจุด ครอบคลุมพื้นที่ทั้งประเทศ ดังนั้นเพื่อให้การอ่านข้อมูลนเำเข้ามาจำกัดเฉฑาะเพื่นที่ การอ่านข้อมูลทีคัดกรองเฉพาะพื้นที่อาจพิจารณา แนวงทางการกรองตั้งแต่หยาบ (bounding box) และคัดกรองละเอียดสุดท้าย (filter by actual polygon) เมธอดที่มีให้ใช้ใน geopandas คือ cx() และ sjoin() <br/>
   นอกจากนี้ ในการเข้าถึงข้อมูลขนาดใหญ่ อาจพิจารณาถึง การอ่านแล้วมีการคำนวนซับซ้อนกินเวลานาน เราจึงจัดเก็บผลลัพธ์ที่ประมวลผลแล้วไว้ใช้งานในครั้งต่อๆ ไป เทตนิตนี้ได้แก่การ caching และการถ่ายทอดโครงสร้างข้อมูลในคอมพิวเตอร์นำไปเก็บในหน่วยความจำโดยตรงเรียกว่า serialization เมื่อทำการอ่าน memory image นี้กลับมาใช้งานใหม่ จะทำได้รวดเร็ว พร้อมกับโครงสร้างข้อมูลเดิมยังคงสภาพอยู่ พร้อมใช้งานได้ทันที ฟังก์ชันก์ที่มีอยู่ใน pyhon ช่วยการพัฒนาอัลกอรึธึมนี้คือ pathlib.Path.is_dir(), pathlib.Path.is_file() และ  pickle.read()  , pickle.write() ดังปรากฏในฟังก์ชัน _RW_CACHE_() ในโค๊ดตัวอย่างนี้<br/>
<br/>
def _RW_CACHE_( CACHE , FUNC=None): <br/>
    ''' a caching system for serializing data structure or object into <br/>
        non-volatile storage and for later retrieval efficiently'''  <br/>
        
